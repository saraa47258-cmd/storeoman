#!/bin/bash

# ุณูุฑูุจุช ุชุญุฏูุซ ุงููุดุฑูุน ูู GitHub

echo "โโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโ"
echo "   ุชุญุฏูุซ ูุดุฑูุน StoreOman ูู GitHub"
echo "โโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโ"
echo ""

# ุงูุงูุชูุงู ุฅูู ูุฌูุฏ ุงููุดุฑูุน
cd /var/www/alshabibi/storeoman || exit

# ุงูุชุญูู ูู Git
if [ ! -d .git ]; then
    echo "โ Git ุบูุฑ ูููุฃ. ูู ุจุฑุจุท ุงููุดุฑูุน ูุน GitHub ุฃููุงู"
    exit 1
fi

echo "๐ฅ ุณุญุจ ุงูุชุญุฏูุซุงุช ูู GitHub..."
git pull origin main

if [ $? -eq 0 ]; then
    echo "โ ุชู ุณุญุจ ุงูุชุญุฏูุซุงุช ุจูุฌุงุญ"
    echo ""
    echo "๐ ุฅุนุงุฏุฉ ุชุดุบูู Docker..."
    docker-compose restart
    
    echo ""
    echo "โ ุชู ุงูุชุญุฏูุซ ุจูุฌุงุญ!"
    echo ""
    echo "ุงูุชุญูู ูู ุงูุญุงูุฉ:"
    docker-compose ps
else
    echo "โ ูุดู ุณุญุจ ุงูุชุญุฏูุซุงุช"
    echo ""
    echo "ุชุญูู ูู:"
    echo "  1. ุงููุดุฑูุน ูุฑุจูุท ูุน GitHub"
    echo "  2. ูุฏูู ุงุชุตุงู ุจุงูุฅูุชุฑูุช"
    echo "  3. ูุง ุชูุฌุฏ ุชุนุฏููุงุช ูุญููุฉ ุชุชุนุงุฑุถ"
    exit 1
fi
